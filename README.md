# 🍅 Chrome 番茄工作法计时器

一个基于 Chrome Manifest V3 的番茄工作法计时器扩展程序，帮助您提高工作效率。

## 功能特性

### 🎯 核心功能
- **智能计时循环**：支持25分钟工作、5分钟短休息、15分钟长休息的经典番茄时间配置
- **自动循环管理**：完成4个工作周期后自动进入长休息
- **后台运行**：使用 Service Worker 确保计时器在后台精确运行
- **桌面通知**：计时结束时自动弹出桌面通知和音效提醒
- **跨设备同步**：设置数据通过 Chrome 账户同步
- **📊 历史记录追踪**：自动记录每个完成的番茄工作周期
- **📈 数据分析可视化**：提供详细的统计分析和趋势图表

### 🎨 用户界面
- **现代设计**：采用渐变背景和玻璃拟态效果的现代 UI
- **标签页切换**：计时器和分析页面分离，界面简洁清晰
- **任务分类**：支持为每个番茄时钟设置任务类型标签
- **直观显示**：大字体显示当前状态和剩余时间（MM:SS 格式）
- **周期计数**：清晰显示当前是第几个番茄周期
- **便捷控制**：开始/暂停、跳过、重置按钮
- **设置面板**：点击齿轮图标可展开时间设置
- **📊 分析仪表板**：
  - 今日汇总：显示当天完成的番茄数和专注时间
  - 本周趋势：柱状图展示最近7天的完成情况
  - 历史总计：显示累计的番茄数和总专注小时数
  - 标签分布：展示不同任务类型的时间分配
  - 数据管理：支持导出历史数据和清除记录

### 🔧 技术特点
- 基于 Chrome Manifest V3
- 使用 `chrome.alarms` API 确保精确计时
- 支持 `chrome.notifications` 桌面通知
- 通过 `chrome.storage.sync` 实现设置同步
- 纯原生 JavaScript，无第三方依赖
- 响应式设计，支持不同屏幕尺寸

## 安装方法

### 开发者模式安装
1. 下载或克隆此项目到本地
2. 打开 Chrome 浏览器，进入 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹
6. 扩展程序将自动加载并显示在工具栏中

### 权限说明
该扩展程序需要以下权限：
- `alarms`：用于后台计时功能
- `notifications`：用于显示桌面通知
- `storage`：用于保存和同步用户设置

## 使用方法

### 基本操作
1. **开始计时**：点击"开始"按钮启动番茄时钟
2. **选择任务类型**：在开始前可选择或输入任务标签（工作、学习、创意等）
3. **暂停/继续**：再次点击按钮可暂停或继续计时
4. **跳过当前阶段**：点击"跳过"按钮立即进入下一阶段
5. **重置计时器**：点击"重置"按钮回到初始状态

### 📊 查看数据分析
1. 点击顶部的"分析"标签页切换到数据分析界面
2. 查看今日汇总、本周趋势和历史总计
3. 了解不同任务类型的时间分配情况
4. 使用"导出数据"按钮下载完整的历史记录JSON文件
5. 使用"清除所有历史"按钮重置所有数据（需确认）

### 自定义设置
1. 点击右上角的齿轮图标展开设置面板
2. 分别设置工作时间、短休息时间、长休息时间（单位：分钟）
3. 点击"保存设置"应用新的时间配置
4. 设置会自动同步到您的 Chrome 账户

### 状态说明
- **工作**：专注工作时间，默认25分钟
- **短休息**：短暂休息时间，默认5分钟  
- **长休息**：长时间休息，默认15分钟，每4个工作周期后进行

## 文件结构

```
Chrome-tomato-clock/
├── manifest.json          # 扩展程序配置文件
├── popup.html             # 弹出窗口HTML结构
├── popup.css              # 弹出窗口样式文件
├── popup.js               # 弹出窗口逻辑代码
├── service-worker.js      # 后台服务工作脚本
├── notification.html      # 自定义通知页面
└── README.md             # 项目说明文档
```

## 技术实现

### Manifest V3 配置
- 使用 Service Worker 替代 background pages
- 声明必要的权限和资源访问
- 配置弹出窗口和图标

### 后台计时管理
- 使用 `chrome.alarms` API 实现精确的后台计时
- 通过 `chrome.storage.local` 保存计时器状态
- 支持浏览器重启后恢复计时状态

### 消息通信
- popup 和 service worker 之间通过 `chrome.runtime` 进行通信
- 实时同步计时器状态和用户操作
- 支持多窗口状态同步

### 数据持久化
- 使用 `chrome.storage.sync` 同步用户设置
- 使用 `chrome.storage.local` 保存临时计时状态
- 自动恢复上次的计时进度

## 开发和贡献

### 本地开发
1. 克隆项目：`git clone https://github.com/blue7zz/Chrome-tomato-clock.git`
2. 在 Chrome 中加载扩展程序进行测试
3. 修改代码后重新加载扩展程序

### 代码结构
- **popup.js**：前端界面逻辑，处理用户交互
- **service-worker.js**：后台计时逻辑，管理alarms和通知
- **popup.css**：现代化的用户界面样式
- **popup.html**：语义化的HTML结构

## 许可证

MIT License - 请查看 LICENSE 文件了解详情。

## 更新日志

### v1.1.0 - 历史记录与数据分析
- ✅ 新增历史记录追踪功能，自动记录每个完成的番茄工作周期
- ✅ 添加任务类型标签系统，支持工作、学习、创意等分类
- ✅ 实现数据分析可视化界面，包含：
  - 今日汇总统计
  - 本周趋势柱状图
  - 历史总计数据
  - 任务类型分布图表
- ✅ 提供数据导出功能（JSON格式）
- ✅ 支持历史数据清除和管理
- ✅ 新增标签页界面，分离计时器和分析功能
- ✅ 数据存储优化，支持跨设备同步

### v1.0.0
- ✅ 实现基础番茄工作法计时功能
- ✅ 添加现代化用户界面设计
- ✅ 支持自定义时间设置
- ✅ 集成桌面通知和音效提醒
- ✅ 实现后台精确计时
- ✅ 支持设置跨设备同步

---

**享受高效的番茄工作法时光！🍅⏰**
